<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2024-12-31T13:48:00.000Z" agent="Kiro" version="22.1.0">
  <diagram id="mpoc-sdk-system-architecture" name="MPoC SDK System Architecture">
    <mxGraphModel dx="1600" dy="1000" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1800" pageHeight="1200" math="0" shadow="0">
  <root>
    <mxCell id="0"/>
    <mxCell id="1" parent="0"/>
    
    <!-- æ ‡é¢˜ -->
    <mxCell id="title" value="SUNBAY MPoC SDK ç³»ç»Ÿæž¶æž„ä¸Žäº¤äº’æµç¨‹" style="text;fontSize=18;fontStyle=1;align=center;fillColor=#e1f5fe;strokeColor=#01579b;rounded=1;" vertex="1" parent="1">
      <mxGeometry x="40" y="20" width="720" height="40" as="geometry"/>
    </mxCell>
    
    <!-- å®¢æˆ·ç«¯åŒºåŸŸ -->
    <mxCell id="client-area" value="å®¢æˆ·ç«¯" style="rounded=1;fillColor=#e3f2fd;strokeColor=#1976d2;fontSize=14;fontStyle=1;align=center;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="40" y="80" width="200" height="180" as="geometry"/>
    </mxCell>
    
    <mxCell id="android-app" value="ðŸ“± Android App&#xa;&#xa;â€¢ é›†æˆ MPoC SDK&#xa;â€¢ äº¤æ˜“ç•Œé¢&#xa;â€¢ ç›´æŽ¥æäº¤åˆ° POSP" style="rounded=1;fillColor=#ffffff;strokeColor=#1976d2;fontSize=12;align=left;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="60" y="110" width="160" height="60" as="geometry"/>
    </mxCell>
    
    <mxCell id="mpoc-sdk" value="ðŸ›¡ï¸ MPoC SDK (AAR)&#xa;&#xa;â€¢ è®¾å¤‡æ³¨å†Œ&#xa;â€¢ è¯ä¹¦ç®¡ç†&#xa;â€¢ å¯†é’¥åˆå§‹åŒ–&#xa;â€¢ PIN åŠ å¯†" style="rounded=1;fillColor=#fff8e1;strokeColor=#e65100;fontSize=12;align=left;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="60" y="180" width="160" height="70" as="geometry"/>
    </mxCell>
    
    <!-- æœåŠ¡ç«¯åŒºåŸŸ -->
    <mxCell id="server-area" value="æœåŠ¡ç«¯" style="rounded=1;fillColor=#e8f5e9;strokeColor=#388e3c;fontSize=14;fontStyle=1;align=center;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="280" y="80" width="320" height="180" as="geometry"/>
    </mxCell>
    
    <mxCell id="am-backend" value="ðŸ–¥ï¸ A/M-Backend&#xa;&#xa;â€¢ è®¾å¤‡æ³¨å†Œç®¡ç†&#xa;â€¢ è¯ä¹¦ç­¾å‘&#xa;â€¢ å¯†é’¥äº¤æ¢&#xa;â€¢ äº¤æ˜“é‰´è¯" style="rounded=1;fillColor=#ffffff;strokeColor=#388e3c;fontSize=12;align=left;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="300" y="110" width="130" height="70" as="geometry"/>
    </mxCell>
    
    <mxCell id="posp" value="ðŸ¦ SUNBAY POSP&#xa;&#xa;â€¢ äº¤æ˜“å¤„ç†&#xa;â€¢ PIN è½¬åŠ å¯†&#xa;â€¢ è·¯ç”±åˆ° Processor" style="rounded=1;fillColor=#fce4ec;strokeColor=#c2185b;fontSize=12;align=left;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="450" y="110" width="130" height="70" as="geometry"/>
    </mxCell>
    
    <mxCell id="rki-hsm" value="ðŸ” RKI CloudHSM&#xa;&#xa;â€¢ CA è¯ä¹¦ç­¾å‘&#xa;â€¢ DUKPT å¯†é’¥ç®¡ç†&#xa;â€¢ PIN è½¬åŠ å¯†" style="rounded=1;fillColor=#fff8e1;strokeColor=#ffa000;fontSize=12;align=left;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="300" y="190" width="130" height="60" as="geometry"/>
    </mxCell>
    
    <mxCell id="processor" value="ðŸ’³ Processor&#xa;TSYS/Fiserv/Elavon" style="rounded=1;fillColor=#f3e5f5;strokeColor=#7b1fa2;fontSize=12;align=center;" vertex="1" parent="1">
      <mxGeometry x="450" y="190" width="130" height="60" as="geometry"/>
    </mxCell>
    
    <!-- åˆå§‹åŒ–æµç¨‹ -->
    <mxCell id="init-title" value="SDK åˆå§‹åŒ–æµç¨‹ (æŒ‰é˜¶æ®µé¡ºåº)" style="text;fontSize=16;fontStyle=1;align=center;fillColor=#fff3e0;strokeColor=#e65100;rounded=1;" vertex="1" parent="1">
      <mxGeometry x="40" y="280" width="720" height="30" as="geometry"/>
    </mxCell>
    
    <!-- é˜¶æ®µä¸€ï¼šè®¾å¤‡æ³¨å†Œ -->
    <mxCell id="stage1" value="é˜¶æ®µä¸€ï¼šè®¾å¤‡æ³¨å†Œ" style="rounded=1;fillColor=#e3f2fd;strokeColor=#1976d2;fontSize=14;fontStyle=1;align=center;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="40" y="320" width="170" height="120" as="geometry"/>
    </mxCell>
    
    <mxCell id="stage1-content" value="1.1 å®‰å…¨çŽ¯å¢ƒæ£€æµ‹&#xa;â€¢ Root/æ¨¡æ‹Ÿå™¨æ£€æµ‹&#xa;â€¢ Hook æ¡†æž¶æ£€æµ‹&#xa;â€¢ TEE ç±»åž‹æ£€æµ‹&#xa;&#xa;1.2 è®¾å¤‡æ³¨å†Œ&#xa;â€¢ ä¸ŠæŠ¥è®¾å¤‡ä¿¡æ¯&#xa;â€¢ èŽ·å– deviceId&#xa;â€¢ å»ºç«‹ HTTPS è¿žæŽ¥" style="text;fontSize=11;align=left;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="50" y="345" width="150" height="85" as="geometry"/>
    </mxCell>
    
    <!-- é˜¶æ®µäºŒï¼šè¯ä¹¦ç­¾å‘ -->
    <mxCell id="stage2" value="é˜¶æ®µäºŒï¼šè¯ä¹¦ç­¾å‘" style="rounded=1;fillColor=#fff8e1;strokeColor=#e65100;fontSize=14;fontStyle=1;align=center;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="220" y="320" width="170" height="120" as="geometry"/>
    </mxCell>
    
    <mxCell id="stage2-content" value="2.1 ç”Ÿæˆ ECC å¯†é’¥å¯¹&#xa;â€¢ P-256 æ›²çº¿&#xa;â€¢ å­˜å‚¨åˆ° Keystore&#xa;&#xa;2.2 æäº¤ CSR&#xa;â€¢ åˆ›å»ºè¯ä¹¦è¯·æ±‚&#xa;â€¢ RKI HSM ç­¾å‘&#xa;&#xa;2.3 å­˜å‚¨è¯ä¹¦" style="text;fontSize=11;align=left;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="230" y="345" width="150" height="85" as="geometry"/>
    </mxCell>
    
    <!-- é˜¶æ®µä¸‰ï¼šå¯†é’¥åˆå§‹åŒ– -->
    <mxCell id="stage3" value="é˜¶æ®µä¸‰ï¼šå¯†é’¥åˆå§‹åŒ–" style="rounded=1;fillColor=#e8f5e9;strokeColor=#388e3c;fontSize=14;fontStyle=1;align=center;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="400" y="320" width="170" height="120" as="geometry"/>
    </mxCell>
    
    <mxCell id="stage3-content" value="æ ¹æ® TEE ç±»åž‹ï¼š&#xa;&#xa;SE/TEE æ¨¡å¼ï¼š&#xa;â€¢ DUKPT å¯†é’¥ä¸‹è½½&#xa;â€¢ å­˜å‚¨åˆ° TEE/SE&#xa;&#xa;WhiteBox æ¨¡å¼ï¼š&#xa;â€¢ DH-ECC å¯†é’¥äº¤æ¢&#xa;â€¢ æ´¾ç”Ÿä¼šè¯å¯†é’¥" style="text;fontSize=11;align=left;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="410" y="345" width="150" height="85" as="geometry"/>
    </mxCell>
    
    <!-- é˜¶æ®µå››ï¼šäº¤æ˜“å¤„ç† -->
    <mxCell id="stage4" value="é˜¶æ®µå››ï¼šäº¤æ˜“å¤„ç†" style="rounded=1;fillColor=#fce4ec;strokeColor=#c2185b;fontSize=14;fontStyle=1;align=center;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="580" y="320" width="170" height="120" as="geometry"/>
    </mxCell>
    
    <mxCell id="stage4-content" value="4.1 äº¤æ˜“é‰´è¯&#xa;â€¢ èŽ·å– Transaction Token&#xa;&#xa;4.2 PIN åŠ å¯†&#xa;â€¢ DUKPT æˆ– WhiteBox&#xa;â€¢ ç”Ÿæˆ PIN Block&#xa;&#xa;4.3 äº¤æ˜“æäº¤&#xa;â€¢ App ç›´æŽ¥æäº¤ POSP" style="text;fontSize=11;align=left;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="590" y="345" width="150" height="85" as="geometry"/>
    </mxCell>
    
    <!-- TEE ç±»åž‹å¯¹æ¯” -->
    <mxCell id="tee-title" value="TEE ç±»åž‹ä¸Žå¯†é’¥æ–¹æ¡ˆå¯¹æ¯”" style="text;fontSize=16;fontStyle=1;align=center;fillColor=#fff3e0;strokeColor=#e65100;rounded=1;" vertex="1" parent="1">
      <mxGeometry x="40" y="460" width="720" height="30" as="geometry"/>
    </mxCell>
    
    <!-- SE æ¨¡å¼ -->
    <mxCell id="se-mode" value="SE (Secure Element)" style="rounded=1;fillColor=#e3f2fd;strokeColor=#1976d2;fontSize=14;fontStyle=1;align=center;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="40" y="500" width="230" height="100" as="geometry"/>
    </mxCell>
    
    <mxCell id="se-content" value="â€¢ å®‰å…¨çº§åˆ«ï¼šâ­â­â­ æœ€é«˜&#xa;â€¢ å¯†é’¥æ–¹æ¡ˆï¼šDUKPT&#xa;â€¢ å­˜å‚¨ä½ç½®ï¼šSE èŠ¯ç‰‡å†…&#xa;â€¢ æ¯ç¬”äº¤æ˜“ï¼šå”¯ä¸€æ´¾ç”Ÿå¯†é’¥&#xa;â€¢ ç¦»çº¿æ”¯æŒï¼šå®Œå…¨æ”¯æŒ" style="text;fontSize=11;align=left;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="50" y="525" width="210" height="70" as="geometry"/>
    </mxCell>
    
    <!-- TEE æ¨¡å¼ -->
    <mxCell id="tee-mode" value="TEE (TrustZone)" style="rounded=1;fillColor=#fff8e1;strokeColor=#e65100;fontSize=14;fontStyle=1;align=center;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="285" y="500" width="230" height="100" as="geometry"/>
    </mxCell>
    
    <mxCell id="tee-content" value="â€¢ å®‰å…¨çº§åˆ«ï¼šâ­â­ é«˜&#xa;â€¢ å¯†é’¥æ–¹æ¡ˆï¼šDUKPT&#xa;â€¢ å­˜å‚¨ä½ç½®ï¼šTEE å®‰å…¨åŒº&#xa;â€¢ æ¯ç¬”äº¤æ˜“ï¼šå”¯ä¸€æ´¾ç”Ÿå¯†é’¥&#xa;â€¢ ç¦»çº¿æ”¯æŒï¼šå®Œå…¨æ”¯æŒ" style="text;fontSize=11;align=left;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="295" y="525" width="210" height="70" as="geometry"/>
    </mxCell>
    
    <!-- WhiteBox æ¨¡å¼ -->
    <mxCell id="whitebox-mode" value="WhiteBox" style="rounded=1;fillColor=#e8f5e9;strokeColor=#388e3c;fontSize=14;fontStyle=1;align=center;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="530" y="500" width="230" height="100" as="geometry"/>
    </mxCell>
    
    <mxCell id="whitebox-content" value="â€¢ å®‰å…¨çº§åˆ«ï¼šâ­ ä¸­ç­‰&#xa;â€¢ å¯†é’¥æ–¹æ¡ˆï¼šDH-ECC&#xa;â€¢ å­˜å‚¨ä½ç½®ï¼šWhiteBox ä¿æŠ¤å†…å­˜&#xa;â€¢ ä¼šè¯å¯†é’¥ï¼š30åˆ†é’Ÿæœ‰æ•ˆæœŸ&#xa;â€¢ ç¦»çº¿æ”¯æŒï¼šæœ‰é™æ”¯æŒ" style="text;fontSize=11;align=left;verticalAlign=top;" vertex="1" parent="1">
      <mxGeometry x="540" y="525" width="210" height="70" as="geometry"/>
    </mxCell>
    
    <!-- è¿žæŽ¥çº¿ -->
    <!-- App åˆ° SDK -->
    <mxCell id="edge1" value="â‘  å‡½æ•°è°ƒç”¨" style="endArrow=classic;edgeStyle=orthogonalEdgeStyle;curved=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="android-app" target="mpoc-sdk">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    
    <!-- SDK åˆ° Backend -->
    <mxCell id="edge2" value="â‘¡ æ³¨å†Œ/è¯ä¹¦/å¯†é’¥" style="endArrow=classic;edgeStyle=orthogonalEdgeStyle;curved=1;exitX=1;exitY=0.3;entryX=0;entryY=0.3;" edge="1" parent="1" source="mpoc-sdk" target="am-backend">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    
    <!-- SDK åˆ° HSM -->
    <mxCell id="edge3" value="â‘¢ DUKPT å¯†é’¥ä¸‹è½½" style="endArrow=classic;edgeStyle=orthogonalEdgeStyle;curved=1;exitX=1;exitY=0.7;entryX=0;entryY=0.5;" edge="1" parent="1" source="mpoc-sdk" target="rki-hsm">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    
    <!-- Backend åˆ° HSM -->
    <mxCell id="edge4" value="CA ç­¾å‘" style="endArrow=classic;edgeStyle=orthogonalEdgeStyle;curved=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="am-backend" target="rki-hsm">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    
    <!-- App åˆ° POSP -->
    <mxCell id="edge5" value="â‘¤ äº¤æ˜“æäº¤" style="endArrow=classic;edgeStyle=orthogonalEdgeStyle;curved=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" edge="1" parent="1" source="android-app" target="posp">
      <mxGeometry relative="1" as="geometry">
        <Array as="points">
          <mxPoint x="240" y="140"/>
          <mxPoint x="240" y="100"/>
          <mxPoint x="430" y="100"/>
          <mxPoint x="430" y="145"/>
        </Array>
      </mxGeometry>
    </mxCell>
    
    <!-- POSP åˆ° Processor -->
    <mxCell id="edge6" value="â‘¦ äº¤æ˜“è·¯ç”±" style="endArrow=classic;edgeStyle=orthogonalEdgeStyle;curved=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="posp" target="processor">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    
    <!-- POSP åˆ° HSM -->
    <mxCell id="edge7" value="â‘¥ PIN è½¬åŠ å¯†" style="endArrow=classic;edgeStyle=orthogonalEdgeStyle;curved=1;exitX=0;exitY=1;entryX=1;entryY=0.5;" edge="1" parent="1" source="posp" target="rki-hsm">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    
    <!-- é˜¶æ®µæµç¨‹ç®­å¤´ -->
    <mxCell id="flow1" value="" style="endArrow=classic;edgeStyle=orthogonalEdgeStyle;curved=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;strokeWidth=3;strokeColor=#1976d2;" edge="1" parent="1" source="stage1" target="stage2">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    
    <mxCell id="flow2" value="" style="endArrow=classic;edgeStyle=orthogonalEdgeStyle;curved=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;strokeWidth=3;strokeColor=#e65100;" edge="1" parent="1" source="stage2" target="stage3">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    
    <mxCell id="flow3" value="" style="endArrow=classic;edgeStyle=orthogonalEdgeStyle;curved=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;strokeWidth=3;strokeColor=#388e3c;" edge="1" parent="1" source="stage3" target="stage4">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    
  </root>
</mxGraphModel>
</diagram>
</mxfile>